<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Movie Review - The Moon Thieves</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body id="app">

    <div class="login-page""
        style="background-image: url('../images/border2.jpg'); background-repeat: no-repeat; padding-left: 5vh; padding-top:5%; background-position: 90% 0%; background-size:60%; opacity: 0.7;">
        <div v-if="!registerActive" class="wallpaper-login"></div>
        <form @submit.prevent ="login">
            <div class="form-group">
                <label for="inputName" class="col-sm-10 col-form-label">Username</label>
              <input class="form-control" id="inputName"  v-model="credentials.Username">
            </div>
            <div class="form-group">
              <label for="inputPassword">Password</label>
              <input class="form-control" id="inputPassword" v-model="credentials.Password">
            </div>
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="exampleCheck1">
              <label class="form-check-label" for="exampleCheck1">Check me out</label>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form> 
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

        <script type="module">
            import { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
        
            createApp({
                data() {
                    return {
                        //message: 'Hello Vue!'
                        credentials: {
                           Username: '',
                            Password: ''
                             }
                        }
                     },

        methods: {
    // post the booking to the backend
    async login() {
        // post the booking to the backend
        try {
        // fetch
        const response = await fetch('/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(credentials.value)
        });

        // response
        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.message);
        }

        // save token to local storage
        localStorage.setItem('token', data.token);
        alert(data.token);
    } catch (error) {
        alert(error);
    }
    }
}
            }).mount('#app')
        </script>

</body>



</html>